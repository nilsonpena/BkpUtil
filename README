Shell Script que automatiza backups para Linux

Sistema Testado: CentOS 5.3

Esse script faz um backup completo há cada mês (AAAA-MM-DD.full.tar.gz) e um backup
incremental (AAAA-MM-DD.inc.tar.gz) há cada dia. Há cada novo mês o arquivo full do mês anterior é salvo
como arquivo morto (AAAA-MM.full.tar.gz.OLD). É possivel configurar a quantidade de
arquivos .OLD que serão mantidos.

É necessário ter o ssmt instalado para que o administrador seja avisado por email
do andamento dos backups.

UTILIZAÇÃO
Torne o arquivo bkputil.sh executável ex.: chmod +x bkputil.sh

Renomeie os arquivo bkp.conf.samble, bkp.list.sample e bkp.excluded.list.sample, removendo
a extensão .sample e se preferir  mude o nome bkp para algum nome que lhe lembre o que está
sendo feito o backup, por ex.: MinhaMusicas.conf MeusDocs.conf. O nome do arquivo .conf
será utilizado para identificar os logs.

Edite o arquivo .conf de acordo com as suas necessidades, todos os campos estão
devidamente comentados.

No HD externo, crie uma pasta para receber os arquivos de backup, o nome dessa pasta será
informado no arquivo .conf. Deve ser criada uma pasta para casa arquivo .conf utilizado

No arquivo .list coloque em cada linha os nomes dos diretórios/arquivos que deseja
incluir no sistema de backup

No arquivo .excluded.list coloque em cada linha os nomes dos diretórios/arquivos
que deja que não sejam incluidos no backup

O script deve ser iniciado como root e o arquivo .conf deve ser passado como 
parâmetro ex.: sh bkputil.sh bkp.conf


AGENDAMENTO
Insira em /etc/crontab a execução do script em uma rotina diária, na hora que lhe for mais conveniente,
ex.:  45 19 * * * root sh /home/meus_scripts/bkputil/bkputil.sh bkp.conf
Dessa forma, em todos os dias do ano às 19:45 o script será iniciado


A linha do crontab é dividida em 6 campos
*	*	*	*	*	USUARIO COMANDO
Campo 	Função
1o. 	Minuto (0-59)
2o. 	Hora (0-23)
3o. 	Dia do mês (1-31) 
4o. 	Mês (1-12)
5o. 	Dia da semana (0-6, onde 0 é domingo)
6o. 	USUARIO COMANDO para execução

